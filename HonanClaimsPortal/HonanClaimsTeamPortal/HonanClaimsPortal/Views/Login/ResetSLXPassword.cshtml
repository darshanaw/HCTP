@model HonanClaimsWebApi.Models.PasswordResetModel

@{
    Layout = null;
}

<!-- =============== VENDOR STYLES ===============-->
<!-- FONT AWESOME-->
<link rel="stylesheet" href="~/Content/vendor/fontawesome/css/font-awesome.min.css">
<!-- SIMPLE LINE ICONS-->
<link rel="stylesheet" href="~/Content/vendor/simple-line-icons/css/simple-line-icons.css">
<!-- ANIMATE.CSS-->
<link rel="stylesheet" href="~/Content/vendor/animate.css/animate.min.css">
<!-- WHIRL (spinners)-->
<link rel="stylesheet" href="~/Content/vendor/whirl/dist/whirl.css">
<!-- =============== PAGE VENDOR STYLES ===============-->
<!-- WEATHER ICONS-->
<link rel="stylesheet" href="~/Content/vendor/weather-icons/css/weather-icons.min.css">
<!-- =============== BOOTSTRAP STYLES ===============-->
<link rel="stylesheet" href="~/Content/app/css/bootstrap.css" id="bscss">
<!-- =============== APP STYLES ===============-->
<link rel="stylesheet" href="~/Content/app/css/app.css" id="maincss">

<link href="~/Content/Custom.css" rel="stylesheet" />
<!-- JQUERY-->
<script src="~/Content/vendor/jquery/dist/jquery.js"></script>

<link href="~/Content/Overlay.css" rel="stylesheet" />



<style>
    .footer {
        position: absolute;
        right: 0;
        bottom: 0;
        left: 0;
        padding: 1rem;
        background-color: #efefef;
        text-align: right;
    }

    .ngdialog-content {
        width: 1000px !important
    }

    .form-horizontal .form-group {
        margin-left: 0px;
        margin-right: 0px;
    }
</style>


@{
    var message = TempData["SuccessMsg"];
}
<div style="background-image: url('../../Content/app/img/backdrop2.jpg'); background-size:100% 100%; background-repeat: no-repeat; background-position: left top; height: 100%">
    <div class="block-center  wd-xl" style="padding-top: 10%">
        <!-- START panel-->
        <div class="panel panel-dark">
            <div class="panel-heading text-center">
                Claims Team Portal - Change Password
            </div>
            <div class="panel-body">

                <div class="col-md-12 clearfix">
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <img src="@Url.Content("~/Content/app/img/honanWbn.png")" alt="" style=" width: 100%; display: block;" />
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <img src="@Url.Content("~/Content/app/img/riskmart-logo.jpg")" alt="" style="width: 100%; display: block;" />
                    </div>
                </div>
                <br />
                <br />

                @using (Html.BeginForm("ResetSLXPassword", "Login", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @id = "frmChangePassword", @class = "form-horizontal", role = "form" }))
                {
                    @Html.HiddenFor(x => x.UserId);
                    @Html.HiddenFor(x => x.DaysLeft);
                    @Html.HiddenFor(x => x.CurrentPassword);



                    if (@Model.DaysLeft <= 0)
                    {
                        <p class="text-danger">Your password has expired. Please change password. Days to Password Expiry : @Model.DaysLeft</p>
                    }
                    else
                    {
                        <p class="text-warning">Your password is about to expire. Please change password. Days to Password Expiry : @Model.DaysLeft</p>
                    }

                    <div class="form-group has-feedback">
                        @Html.TextBoxFor(m => m.UserCode, new { @class = "form-control", @placeholder = "Enter usercode", @readonly = true })
                        <span class="fa fa-user form-control-feedback text-muted"></span>
                        @Html.ValidationMessageFor(m => m.UserCode, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group has-feedback">
                        @Html.TextBoxFor(m => m.NewPassword, new { @class = "form-control", @placeholder = "New Password", @type = "password" })
                        <span class="fa fa-lock form-control-feedback text-muted"></span>
                        @Html.ValidationMessageFor(m => m.NewPassword, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group has-feedback">
                        @Html.TextBoxFor(m => m.ConfirmNewPassword, new { @class = "form-control", @placeholder = "Confirm New Password", @type = "password" })
                        <span class="fa fa-lock form-control-feedback text-muted"></span>
                        @Html.ValidationMessageFor(m => m.ConfirmNewPassword, "", new { @class = "text-danger" })
                    </div>

                    <p class="text-info text-sm">Password must be minimum 6 characters with atleast 1 uppercase letter, 1 number & 1 special character</p>

                    <button type="submit" id="btnSubmit" class="btn btn-block btn-success mt-lg">Change Password</button>

                    if(@Model.DaysLeft > 0)
                    {
                        <button type="button" id="btnNotNow" class="btn btn-block btn-danger mt-lg">Not Now</button>
                    }
                }

                @*@Html.ValidationSummary(true, "", new { @class = "alert alert-danger text-center" })*@

                <br />
                @@ All Rights Reserved Honan Insurance Group
                <br />
                <br />

            </div>
        </div>
        <!-- END panel-->
    </div>

    <!-- =============== VENDOR SCRIPTS ===============-->
    <!-- MODERNIZR-->
    <script src="~/Content/vendor/modernizr/modernizr.custom.js"></script>
    <!-- MATCHMEDIA POLYFILL-->
    <script src="~/Content/vendor/matchMedia/matchMedia.js"></script>
    <!-- JQUERY-->
    <script src="~/Content/vendor/jquery/dist/jquery.js"></script>
    <!-- BOOTSTRAP-->
    <script src="~/Content/vendor/bootstrap/dist/js/bootstrap.js"></script>
    <!-- STORAGE API-->
    <script src="~/Content/vendor/jQuery-Storage-API/jquery.storageapi.js"></script>
    <!-- JQUERY EASING-->
    <script src="~/Content/vendor/jquery.easing/js/jquery.easing.js"></script>
    <!-- ANIMO-->
    <script src="~/Content/vendor/animo.js/animo.js"></script>
    <!-- SLIMSCROLL-->
    <script src="~/Content/vendor/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- SCREENFULL-->
    <script src="~/Content/vendor/screenfull/dist/screenfull.js"></script>
    <!-- LOCALIZE-->
    <script src="~/Content/vendor/jquery-localize-i18n/dist/jquery.localize.js"></script>
    <!-- RTL demo-->
    <script src="~/Content/app/js/demo/demo-rtl.js"></script>
    <!-- =============== PAGE VENDOR SCRIPTS ===============-->


    <script src="~/Scripts/notify.js"></script>

    <script src="~/Scripts/loadingoverlay.min.js"></script>
    <script src="~/Scripts/loadingoverlay_progress.min.js"></script>

    <script>
    $(document).ready(function () {

        $("#btnSubmit").click(function () {
            $.LoadingOverlay("show");
        })


        $("#frmChangePassword").submit(function (e) {
            //$.LoadingOverlay("show");
            //$("#frmChangePassword").validate().element("#CurrentPassword");
            //e.preventDefault();
        });

        $("#btnNotNow").click(function () {
            $.LoadingOverlay("show");
            window.location.href = "/Home/Index";
        });

        

    });
    var message = '@message';
    if (message) {
        $.notify(message, "success");
    }

    </script>
