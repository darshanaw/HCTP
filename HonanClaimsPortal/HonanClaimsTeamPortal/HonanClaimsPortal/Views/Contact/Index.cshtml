@model HonanClaimsWebApi.Models.Contact.ContactListModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="main-container">
    <div class="row mb-15">
        <div class="col-md-12">
            <div class="page-title-1">
                <h3 class="mt-50">Contact</h3>
            </div>
            <div class="search-box-1">
                <div class="form-group mt-20">
                    <label>Contact Name</label>
                    @Html.TextBoxFor(m => m.ConatctName, new { @class = "form-control" })
                </div>
            </div>
            <div class="cust-search">
                <div class="form-group mt-20">
                    <label>Account Name</label>
                    @Html.TextBoxFor(m => m.AccountName, new { @class = "form-control" })
                </div>
            </div>
            <div class="action-btn-1">
                <div class="pull-right mt-45">
                    <button id="clearFilter" style="width:120px" type="button" class="btn btn-default mr-20">Clear Filter</button>
                    <button id="filterList" style="width:120px" type="button" class="btn btn-primary">Filter Accounts</button>
                </div>
            </div>
        </div>
    </div>
    <div id="grid"></div>
</div>

<script>
    $("#clearFilter").click(function () {
        $("#AccountName").val('');
        $("#ConatctName").val('');
        loadContacts();
    });

    $("#filterList").click(function () {
        loadContacts();
    });


    $(document).ready(function () {
        loadContacts();
    });


    function loadContacts() {
        var AccountName = null;
        var ConatctName = null;

        AccountName = $("#AccountName").val();
        ConatctName = $("#ConatctName").val();

        $("#grid").kendoGrid({
            dataSource: {
                transport: {
                    read: "/Contact/GetContacts?AccountName=" + AccountName + "&ConatctName=" + ConatctName
                },
                pageSize: 20
            },
            filterable: true,
            pageSize: 10,
            navigatable: true,
            pageable: true,
            height: 550,
            sortable: true,
            columns: [
                {
                    field: "ContactName",
                    title: "ContactName",
                    template: "<a href='/Contact/ContactDetail?ContactId=#= ContactId #'>#= ContactName #</a>",
                },
                {
                    field: "Account",
                    title: "Account",
                    template: "<a href='/AccountList/AccountDetail?AccountId=#= AccountId #'>#= Account #</a>",
                },

                {
                    field: "State",
                    title: "State",
                },
                {
                    field: "WorkPhone",
                    title: "WorkPhone",
                },
                {
                    field: "Mobile",
                    title: "Mobile",
                },
                {
                    field: "Email",
                    title: "Email",
                },
            ]
        });
    }
</script>
